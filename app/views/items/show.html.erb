<%= render "shared/header" %>

<div class="item-show">
  <div class="item-box">
    <div>詳細</div>

    <%# 画像 %>
    <div class="item-img-content">
      <%= image_tag @item.image, class:"item-box-img" %>
    </div>
    
    
    <%# <div>品名</div> %>
    <div class="name">
      <%= @item.name %>
    </div>

    <%# <div>カテゴリー</div> %>
    <div class="detail-item">
      <%= @item.category.name %>
    </div>

    <%# <div>状態</div> %>
    <div class="detail-item">
      <%= @item.condition.name %>
    </div>

    <div class="detail-item">
      <%= @user.nickname %>
    </div>

    <div>説明</div>
    <div class="item-explain-box">
      <span><%= @item.description %></span>
    </div>
    <%= form_with model: @order, url: item_orders_path(@item), method: "post", class: 'order', local: true do |f| %>
      <% if user_signed_in? && @item.order == nil %>
        <% if current_user.id == @item.user_id %>
          <%= link_to "編集", edit_item_path(@item.id), method: :get, class: "item-red-btn" %>
          <%= link_to "削除", item_path(@item.id), method: :delete, class:"item-destroy" %>
        <% else %>
          <%= render 'shared/error_messages', model: f.object %>
            <%= f.hidden_field :item_id, value: @item.id %>
            <%= f.check_box :accept, checked: false %>
            <%= f.label "受け取りを希望する" %>
            <%= f.submit "決定" %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
